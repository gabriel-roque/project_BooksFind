{% extends 'base.html' %}

{% load static %}

{% block content %}
    <section class="livros" id="portfolio">

        <div class="row m-2">
            <div class="col-auto">
                <button class="btn btn-primary show-form " data-url="{% url 'book.create' %}"> Add livro</button>
            </div>
            <div class="col">
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fas fa-search"></i></span>
                    </div>
                    <input type="text" class="form-control" placeholder="Ex: Aprendendo Linux" id="search"
                           onkeyup="filter()">
                </div>
            </div>

        </div>

        {#{% if books %}#}
        <table class="table" id="table-book">
            <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Titulo</th>
                <th scope="col">Autor</th>
                <th scope="col">Páginas</th>
                <th scope="col">Lancamento</th>
                <th scope="col">Categoria</th>
                <th scope="col">Ações</th>
            </tr>
            </thead>
            <tbody>

            {% include "book/book_list_tr.html" %}
            {#{% else %}#}

            {# <p class="alert alert-warning text-center">A lista está vazia</p>#}

            {#{% endif %}#}


            </tbody>
        </table>
        <div class="modal fade" id="modal-book">
            <div class="modal-dialog">
                <div class="modal-content"></div>
            </div>
        </div>
    </section>

{% endblock %}

{% block js %}
    <script src="{% static '/js/page/book.js' %}"></script>
{% endblock %}

<script>
    function filter() {
        $("#search").keyup(function () {
            //split the current value of searchInput
            var data = this.value.split(" ");
            //create a jquery object of the rows
            var jo = $("#table-book").find("tr");
            if (this.value == "") {
                jo.show();
                return;
            }
            //hide all the rows
            jo.hide();

            //Recusively filter the jquery object to get results.
            jo.filter(function (i, v) {
                var $t = $(this);
                for (var d = 0; d < data.length; ++d) {
                    if ($t.is(":contains('" + data[d] + "')")) {
                        return true;
                    }
                }
                return false;
            })
            //show the rows that match.
                .show();
        }).focus(function () {
            this.value = "";
            $(this).css({
                "color": "black"
            });
            $(this).unbind('focus');
        }).css({
            "color": "#0073e9"
        });
    }
</script>